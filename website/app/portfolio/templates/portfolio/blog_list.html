{% extends 'base.html' %}
{% load static %}

{% block title %}Blog{% endblock %}
{% block meta_description %}AI/ML insights, technical articles, and thought leadership. Explore the latest trends in artificial intelligence, machine learning, and data science.{% endblock %}

{% block content %}
<!-- Blog Header -->
<section class="section-sm" style="padding-top: 120px;">
    <div class="container">
        <div class="text-center mb-xl">
            <h1 class="animate-fadeInDown">AI/ML <span class="text-purple">Insights</span></h1>
            <p class="text-lg opacity-90">
                Sharing knowledge, perspectives, and technical insights on artificial intelligence, machine learning, and emerging technologies
            </p>
        </div>
        
        <!-- Blog Categories Filter -->
        <div class="text-center mb-lg">
            <div class="blog-filters flex justify-center gap-sm" style="flex-wrap: wrap;">
                <button class="btn btn-ghost btn-sm active" data-filter="all">
                    <i class="fas fa-th"></i>
                    All Posts
                </button>
                <button class="btn btn-ghost btn-sm" data-filter="artificial-intelligence">
                    <i class="fas fa-brain"></i>
                    AI
                </button>
                <button class="btn btn-ghost btn-sm" data-filter="machine-learning">
                    <i class="fas fa-robot"></i>
                    Machine Learning
                </button>
                <button class="btn btn-ghost btn-sm" data-filter="deep-learning">
                    <i class="fas fa-network-wired"></i>
                    Deep Learning
                </button>
                <button class="btn btn-ghost btn-sm" data-filter="data-science">
                    <i class="fas fa-chart-line"></i>
                    Data Science
                </button>
                <button class="btn btn-ghost btn-sm" data-filter="tutorials">
                    <i class="fas fa-graduation-cap"></i>
                    Tutorials
                </button>
                <button class="btn btn-ghost btn-sm" data-filter="industry-insights">
                    <i class="fas fa-lightbulb"></i>
                    Industry Insights
                </button>
            </div>
        </div>
    </div>
</section>

<!-- Blog Posts Grid -->
<section class="section-sm">
    <div class="container">
        {% if posts %}
        <div class="grid grid-3" id="blog-grid">
            {% for post in posts %}
            <article class="blog-card animate-fadeInUp" 
                     data-category="{{ post.category.slug|default:'all' }}"
                     data-searchable="{{ post.title|lower }} {{ post.excerpt|lower }} {{ post.category.name|lower|default:'' }}">
                
                <!-- Blog Post Image -->
                {% if post.cover_image %}
                <img src="{{ post.cover_image.url }}" alt="{{ post.title }}" class="blog-image">
                {% else %}
                <div class="blog-image" style="background: linear-gradient(135deg, var(--accent-purple), var(--secondary-dark)); display: flex; align-items: center; justify-content: center;">
                    <i class="fas fa-blog fa-3x text-white opacity-50"></i>
                </div>
                {% endif %}
                
                <div class="blog-content p-lg">
                    <!-- Blog Meta -->
                    <div class="blog-meta">
                        <span class="blog-date">
                            <i class="fas fa-calendar"></i>
                            {{ post.published_at|date:"M d, Y" }}
                        </span>
                        {% if post.category %}
                        <span class="blog-category">{{ post.category.name }}</span>
                        {% endif %}
                        <span class="read-time">
                            <i class="fas fa-clock"></i>
                            {% widthratio post.content|length 1000 5 %} min read
                        </span>
                    </div>
                    
                    <!-- Blog Title -->
                    <h3 class="blog-title">
                        <a href="{{ post.get_absolute_url }}" class="text-white">{{ post.title }}</a>
                    </h3>
                    
                    <!-- Blog Excerpt -->
                    <p class="blog-excerpt">
                        {{ post.excerpt|default:post.content|truncatewords:20|striptags }}
                    </p>
                    
                    <!-- Blog Tags -->
                    {% if post.tags.all %}
                    <div class="blog-tags mb-md">
                        {% for tag in post.tags.all|slice:":4" %}
                        <span class="tag">{{ tag.name }}</span>
                        {% endfor %}
                        {% if post.tags.all|length > 4 %}
                        <span class="tag opacity-50">+{{ post.tags.all|length|add:"-4" }}</span>
                        {% endif %}
                    </div>
                    {% endif %}
                    
                    <!-- Blog Footer -->
                    <div class="blog-footer">
                        <a href="{{ post.get_absolute_url }}" class="btn btn-primary btn-sm">
                            <i class="fas fa-arrow-right"></i>
                            Read More
                        </a>
                        
                        <div class="blog-author">
                            {% if post.author %}
                            <i class="fas fa-user text-purple"></i>
                            <span>{{ post.author.get_full_name|default:post.author.username }}</span>
                            {% endif %}
                        </div>
                    </div>
                </div>
            </article>
            {% endfor %}
        </div>
        
        <!-- No Results Message -->
        <div id="no-results" class="text-center" style="display: none;">
            <div class="card" style="max-width: 500px; margin: 0 auto;">
                <i class="fas fa-search fa-3x text-purple mb-md"></i>
                <h3>No Posts Found</h3>
                <p>Try adjusting your filters to find what you're looking for.</p>
                <button class="btn btn-primary" onclick="resetFilters()">
                    <i class="fas fa-refresh"></i>
                    Reset Filters
                </button>
            </div>
        </div>
        
        {% else %}
        <!-- Empty State -->
        <div class="text-center">
            <div class="card" style="max-width: 500px; margin: 0 auto;">
                <i class="fas fa-blog fa-3x text-purple mb-md"></i>
                <h3>Blog Posts Coming Soon</h3>
                <p>I'm working on creating insightful content about AI/ML, data science, and emerging technologies. Check back soon for the latest posts!</p>
                <a href="{% url 'portfolio:contact' %}" class="btn btn-primary">
                    <i class="fas fa-bell"></i>
                    Get Notified
                </a>
            </div>
        </div>
        {% endif %}
    </div>
</section>

<!-- Featured Topics Section -->
<section class="section bg-secondary">
    <div class="container">
        <div class="text-center mb-xl">
            <h2 class="animate-fadeInDown">Featured <span class="text-purple">Topics</span></h2>
            <p class="text-lg opacity-90">
                Key areas of focus and expertise in AI/ML
            </p>
        </div>
        
        <div class="grid grid-4">
            <div class="card text-center animate-fadeInUp">
                <i class="fas fa-brain fa-3x text-purple mb-md"></i>
                <h4>Neural Networks</h4>
                <p>Deep dives into neural network architectures, training techniques, and optimization strategies.</p>
                <div class="topic-tags">
                    <span class="tag">CNNs</span>
                    <span class="tag">RNNs</span>
                    <span class="tag">Transformers</span>
                </div>
            </div>
            
            <div class="card text-center animate-fadeInUp">
                <i class="fas fa-eye fa-3x text-purple mb-md"></i>
                <h4>Computer Vision</h4>
                <p>Image processing, object detection, and computer vision applications in various industries.</p>
                <div class="topic-tags">
                    <span class="tag">OpenCV</span>
                    <span class="tag">YOLO</span>
                    <span class="tag">Segmentation</span>
                </div>
            </div>
            
            <div class="card text-center animate-fadeInUp">
                <i class="fas fa-language fa-3x text-purple mb-md"></i>
                <h4>Natural Language Processing</h4>
                <p>Text analysis, language models, and conversational AI development insights.</p>
                <div class="topic-tags">
                    <span class="tag">BERT</span>
                    <span class="tag">GPT</span>
                    <span class="tag">NER</span>
                </div>
            </div>
            
            <div class="card text-center animate-fadeInUp">
                <i class="fas fa-cloud fa-3x text-purple mb-md"></i>
                <h4>MLOps & Deployment</h4>
                <p>Best practices for deploying, monitoring, and scaling machine learning models in production.</p>
                <div class="topic-tags">
                    <span class="tag">Docker</span>
                    <span class="tag">Kubernetes</span>
                    <span class="tag">CI/CD</span>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- Newsletter Signup -->
<section class="section">
    <div class="container">
        <div class="text-center">
            <div class="card" style="max-width: 600px; margin: 0 auto;">
                <div class="animate-fadeInUp">
                    <h2 class="mb-md">Stay Updated with <span class="text-purple">AI/ML Insights</span></h2>
                    <p class="mb-lg opacity-90">
                        Subscribe to receive the latest articles, tutorials, and industry insights directly in your inbox.
                    </p>
                    
                    <form class="newsletter-form" style="display: flex; gap: var(--space-sm); max-width: 400px; margin: 0 auto;">
                        <input type="email" class="form-input" placeholder="Enter your email" required style="flex: 1;">
                        <button type="submit" class="btn btn-primary">
                            <i class="fas fa-paper-plane"></i>
                            Subscribe
                        </button>
                    </form>
                    
                    <p class="mt-md text-sm opacity-75">
                        <i class="fas fa-shield-alt text-purple"></i>
                        Your privacy is important. Unsubscribe at any time.
                    </p>
                </div>
            </div>
        </div>
    </div>
</section>
{% endblock %}

{% block extra_css %}
<style>
    .blog-filters .btn.active {
        background: var(--accent-purple);
        color: var(--white);
        border-color: var(--accent-purple);
    }
    
    .blog-image {
        width: 100%;
        height: 220px;
        object-fit: cover;
        transition: transform var(--transition-base);
    }
    
    .blog-card:hover .blog-image {
        transform: scale(1.05);
    }
    
    .blog-content {
        padding: var(--space-lg);
    }
    
    .blog-title a {
        font-size: var(--font-size-xl);
        font-weight: 600;
        line-height: 1.3;
        margin-bottom: var(--space-md);
        display: block;
    }
    
    .blog-excerpt {
        color: var(--light-text);
        opacity: 0.9;
        line-height: 1.6;
        margin-bottom: var(--space-md);
    }
    
    .blog-tags {
        display: flex;
        flex-wrap: wrap;
        gap: var(--space-xs);
    }
    
    .blog-footer {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-top: var(--space-md);
        padding-top: var(--space-md);
        border-top: 1px solid var(--purple-10);
    }
    
    .blog-author {
        display: flex;
        align-items: center;
        gap: var(--space-xs);
        font-size: var(--font-size-sm);
        color: var(--light-text);
        opacity: 0.8;
    }
    
    .topic-tags {
        display: flex;
        flex-wrap: wrap;
        gap: var(--space-xs);
        justify-content: center;
        margin-top: var(--space-md);
    }
    
    .newsletter-form input {
        margin-bottom: 0;
    }
    
    .blog-card {
        transition: all var(--transition-base);
    }
    
    .blog-card.hidden {
        display: none;
    }
    
    @media (max-width: 768px) {
        .blog-filters {
            flex-direction: column;
            align-items: center;
        }
        
        .blog-filters .btn {
            width: 200px;
        }
        
        .grid-3,
        .grid-4 {
            grid-template-columns: 1fr;
        }
        
        .blog-footer {
            flex-direction: column;
            gap: var(--space-sm);
            text-align: center;
        }
        
        .newsletter-form {
            flex-direction: column;
        }
        
        .newsletter-form .btn {
            width: 100%;
        }
    }
</style>
{% endblock %}

{% block extra_js %}
<script>
document.addEventListener('DOMContentLoaded', function() {
    const filterButtons = document.querySelectorAll('[data-filter]');
    const blogCards = document.querySelectorAll('.blog-card');
    const noResults = document.getElementById('no-results');
    
    function filterPosts(filter) {
        let visibleCount = 0;
        
        blogCards.forEach(card => {
            if (filter === 'all' || card.getAttribute('data-category') === filter) {
                card.style.display = 'block';
                card.classList.remove('hidden');
                visibleCount++;
            } else {
                card.style.display = 'none';
                card.classList.add('hidden');
            }
        });
        
        // Show/hide no results message
        if (visibleCount === 0) {
            noResults.style.display = 'block';
        } else {
            noResults.style.display = 'none';
        }
    }
    
    filterButtons.forEach(button => {
        button.addEventListener('click', function() {
            const filter = this.getAttribute('data-filter');
            
            // Update active button
            filterButtons.forEach(btn => btn.classList.remove('active'));
            this.classList.add('active');
            
            // Filter posts
            filterPosts(filter);
        });
    });
    
    // Reset filters function
    window.resetFilters = function() {
        filterButtons.forEach(btn => btn.classList.remove('active'));
        filterButtons[0].classList.add('active'); // Activate "All Posts"
        filterPosts('all');
    };
    
    // Newsletter form handling
    const newsletterForm = document.querySelector('.newsletter-form');
    if (newsletterForm) {
        newsletterForm.addEventListener('submit', function(e) {
            e.preventDefault();
            const email = this.querySelector('input[type="email"]').value;
            
            // Here you would typically send the email to your backend
            console.log('Newsletter signup:', email);
            
            // Show success message
            const button = this.querySelector('button');
            const originalText = button.innerHTML;
            button.innerHTML = '<i class="fas fa-check"></i> Subscribed!';
            button.disabled = true;
            
            setTimeout(() => {
                button.innerHTML = originalText;
                button.disabled = false;
                this.reset();
            }, 3000);
        });
    }
});
</script>
{% endblock %}
